@model lab1.Models.Author
@{
    ViewData["Title"] = "Initialize Profile";
}

<style>
    /* --- Layout & Animation --- */
    .init-container {
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        animation: fadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    /* --- The Deep Glass Panel --- */
    .glass-panel {
        background: rgba(10, 15, 30, 0.45);
        backdrop-filter: blur(50px) saturate(120%);
        -webkit-backdrop-filter: blur(50px) saturate(120%);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 32px;
        padding: 60px;
        width: 100%;
        max-width: 800px;
        box-shadow: 0 40px 80px rgba(0, 0, 0, 0.6), inset 0 2px 4px rgba(255, 255, 255, 0.05);
        position: relative;
        overflow: hidden;
    }

        /* Легкий внутрішній блік для глибини */
        .glass-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        }

    .panel-header {
        text-align: center;
        margin-bottom: 50px;
    }

    .panel-title {
        font-size: 2.8rem;
        font-weight: 800;
        letter-spacing: -0.03em;
        background: linear-gradient(180deg, #ffffff 0%, #aaddff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 12px;
    }

    .panel-subtitle {
        color: rgba(255, 255, 255, 0.5);
        font-size: 1.05rem;
        letter-spacing: 0.02em;
    }

    /* --- Form Grid Layout (ОНОВЛЕНО ДЛЯ 3-х ЕЛЕМЕНТІВ) --- */
    .form-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr); /* Робимо сітку з 6 колонок для гнучкості */
        gap: 28px;
    }

    /* Класи для керування шириною елементів */
    .col-span-2 {
        grid-column: span 2;
    }
    /* Займає 1/3 ширини (для Імені) */
    .col-span-3 {
        grid-column: span 3;
    }
    /* Займає 1/2 ширини (для Юзернейму) */
    .form-group-full {
        grid-column: 1 / -1;
    }
    /* На всю ширину */

    .input-label {
        display: block;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.5);
        margin-bottom: 10px;
        margin-left: 15px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-weight: 600;
    }

    /* --- Deep Inputs --- */
    .deep-input {
        width: 100%;
        padding: 16px 20px;
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        color: #fff;
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: inset 0 2px 6px rgba(0,0,0,0.4);
    }

        .deep-input::placeholder {
            color: rgba(255, 255, 255, 0.2);
        }

        .deep-input:focus {
            outline: none;
            background: rgba(10, 25, 60, 0.5);
            border-color: rgba(0, 113, 227, 0.6);
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.4), 0 0 0 4px rgba(0, 113, 227, 0.15);
        }

    input[type="date"]::-webkit-calendar-picker-indicator {
        filter: invert(1);
        opacity: 0.5;
        cursor: pointer;
    }

    textarea.deep-input {
        min-height: 140px;
        resize: vertical;
        line-height: 1.6;
    }

    .btn-submit {
        grid-column: 1 / -1;
        justify-self: center;
        margin-top: 20px;
        width: auto;
        min-width: 310px;
        padding: 17px 30px;
        background: rgba(0, 113, 227, 0.15);
        color: #fff;
        border: 1px solid rgba(100, 170, 255, 0.3);
        border-radius: 14px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.03em;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        backdrop-filter: blur(20px);
    }

        .btn-submit:hover {
            transform: translateY(-2px);
            background: rgba(0, 113, 227, 0.35);
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 15px 35px rgba(0, 113, 227, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.2);
        }

    .text-danger {
        font-size: 0.8rem;
        color: #ff453a;
        margin-top: 8px;
        display: block;
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }
    }

    @@media (max-width: 768px) {
        .form-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .col-span-2, .col-span-3, .form-group-full {
            grid-column: 1 / -1;
        }

        .glass-panel {
            padding: 40px 24px;
        }

        .panel-title {
            font-size: 2.2rem;
        }
    }
</style>

<div class="init-container">
    <div class="glass-panel">
        <div class="panel-header">
            <h1 class="panel-title">Author Initialization</h1>
            <p class="panel-subtitle">Define your professional identity to unlock the workspace.</p>
        </div>

        <form asp-action="InitializeProfile" method="post" class="form-grid">
            <div asp-validation-summary="ModelOnly" class="text-danger form-group-full"></div>

            <input type="hidden" asp-for="FullName" id="realFullName" />

            <span asp-validation-for="FullName" class="text-danger form-group-full" style="margin-bottom: -15px;"></span>

            <div class="col-span-2">
                <label class="input-label">First Name</label>
                <input id="firstName" class="deep-input" placeholder="e.g. Taras" required />
            </div>

            <div class="col-span-2">
                <label class="input-label">Last Name</label>
                <input id="lastName" class="deep-input" placeholder="e.g. Shevchenko" required />
            </div>

            <div class="col-span-2">
                <label class="input-label">Patronymic</label>
                <input id="patronymic" class="deep-input" placeholder="e.g. Hryhorovych" />
            </div>

            <div class="col-span-3">
                <label class="input-label" asp-for="Nickname"></label>
                <input asp-for="Nickname" class="deep-input" placeholder="e.g. Kobzar" />
                <span asp-validation-for="Nickname" class="text-danger"></span>
            </div>

            <div class="col-span-3">
                <label class="input-label" asp-for="DateOfBirth"></label>
                <input asp-for="DateOfBirth" class="deep-input" type="date" />
                <span asp-validation-for="DateOfBirth" class="text-danger"></span>
            </div>

            <div class="form-group-full">
                <label class="input-label" asp-for="Bio"></label>
                <textarea asp-for="Bio" class="deep-input" placeholder="Tell the system about your background and expertise..."></textarea>
                <span asp-validation-for="Bio" class="text-danger"></span>
            </div>

            <button type="submit" class="btn-submit">Establish Connection</button>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const realFullName = document.getElementById('realFullName');
            const firstInput = document.getElementById('firstName');
            const lastInput = document.getElementById('lastName');
            const patInput = document.getElementById('patronymic');

            if (realFullName.value) {
                const parts = realFullName.value.split(' ');
                if (parts.length >= 1) firstInput.value = parts[0];
                if (parts.length >= 2) lastInput.value = parts[1];
                if (parts.length >= 3) patInput.value = parts.slice(2).join(' ');
            }

            function updateFullName() {
                const first = firstInput.value.trim();
                const last = lastInput.value.trim();
                const pat = patInput.value.trim();
                realFullName.value = `${first} ${last} ${pat}`.trim();
            }

            firstInput.addEventListener('input', updateFullName);
            lastInput.addEventListener('input', updateFullName);
            patInput.addEventListener('input', updateFullName);
        });
    </script>
}